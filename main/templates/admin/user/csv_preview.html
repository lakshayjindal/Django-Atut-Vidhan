{% extends "admin/base_site.html" %}

{% block content %}
  <h2 style="margin-bottom: 20px; color:#2F2F2F;">ðŸ“‚ Preview CSV Data</h2>
  <p style="margin-bottom: 15px; color:#7D6E63;">
    Review the data below before importing. You can also upload a profile picture for each user.
  </p>

 <form method="post">
  {% csrf_token %}
  
  <h3>Preview CSV</h3>
  <div class="csv-table-wrapper">

    <table border="1" class="csv-table">
      <thead>
        <tr>
          {% for header in rows.0.keys %}
          <th>{{ header }}</th>
          {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in rows %}
      <tr>
          {% for value in row.values %}
          <td>{{ value }}</td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Hidden JSON to preserve rows -->
  <input type="hidden" name="rows_json" value='{{ hidden_rows|escape }}'>

  <button type="submit" name="confirm_import" value="1">Confirm Import</button>
</form>

{% endblock %}

{% block extrastyle %}
<style>
  .csv-table-wrapper {
    overflow-x: auto;
    max-width: 100%;
    border: 1px solid #ddd;
    border-radius: 8px;
  }
  .csv-table {
    border-collapse: collapse;
    width: max-content;
    min-width: 100%;
    font-size: 14px;
  }
  .csv-table th,
  .csv-table td {
    border: 1px solid #e0dcd5;
    padding: 10px 12px;
    white-space: nowrap;
    text-align: left;
  }
  .csv-table thead th {
    position: sticky;
    top: 0;
    background: #F4C95D; /* Golden Sand */
    color: #2F2F2F;
    font-weight: bold;
    z-index: 2;
  }
  .csv-table tbody tr:nth-child(even) {
    background-color: #F9EFE3; /* Champagne Mist */
  }
  .csv-table tbody tr:nth-child(odd) {
    background-color: #FFF8F2; /* Ivory Blush */
  }
  .csv-table tbody tr:hover {
    background-color: #FFB7A1; /* Peach Bloom */
    transition: background-color 0.2s ease-in-out;
  }
  .import-btn {
    background: #D72638; /* Royal Rose */
    color: white;
    padding: 10px 18px;
    border: none;
    border-radius: 6px;
    font-size: 15px;
    cursor: pointer;
    font-weight: bold;
  }
  .import-btn:hover {
    background: #a81c2b;
  }
</style>
{% endblock %}
