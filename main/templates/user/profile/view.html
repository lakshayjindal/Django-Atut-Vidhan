{% extends "../base.html" %}
{% load static %}

{% block extra_head %}
    <style>
        :root {
            --bg: #FFF8F2; /* Ivory Blush */
            --panel: #ffffff; /* Pure white panel */
            --accent: #D72638; /* Royal Rose */
            --accent-dark: #a81d2c; /* Darker rose (hover, emphasis) */
            --accent-soft: #FFECE8; /* Soft rose background */
            --header-grad-1: #F4C95D; /* Golden Sand */
            --header-grad-2: #FFB7A1; /* Peach Bloom */
            --border: #f0e6db; /* Champagne Mist tone */
            --muted: #7D6E63; /* Dusty Taupe */
            --text-dark: #2F2F2F; /* Charcoal Silk */
            --text: #4a3f39; /* Warm gray-brown */
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: var(--text);
        }

        .container {
            max-width: 900px;
            margin: 30px auto;
            background: var(--panel);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .profile-card {
            border-radius: 12px;
            overflow: hidden;
        }

        .profile-card .header {
            display: flex;
            gap: 20px;
            background: linear-gradient(135deg, var(--header-grad-1), var(--header-grad-2));
            padding: 20px;
            border-radius: 12px 12px 0 0;
        }

        .profile-main-image {
            width: 140px;
            height: 140px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--panel);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .info {
            flex-grow: 1;
        }

        .name {
            font-size: 26px;
            margin: 0;
            color: var(--text-dark);
            font-weight: 600;
        }

        .profession,
        .age {
            margin: 6px 0;
            color: var(--muted);
            font-size: 0.95rem;
        }

        /* Photo Gallery */
        .photo-gallery {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .photo-gallery img {
            width: calc(33% - 6.66px);
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid var(--header-grad-1);
            transition: transform 0.2s;
            cursor: pointer;
        }

        .photo-gallery img:hover {
            transform: scale(1.05);
        }

        /* Sections */
        .section {
            margin-top: 20px;
        }

        .section h3 {
            color: var(--accent);
            font-size: 1.1rem;
            margin-bottom: 10px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 5px;
        }

        .section ul {
            list-style: none;
            padding-left: 0;
            margin: 0;
        }

        .section ul li {
            padding: 6px 0;
            color: var(--text);
            font-size: 0.95rem;
        }

        /* Quote / Bio */
        .quote {
            margin-top: 25px;
            padding: 16px;
            background-color: var(--accent-soft);
            color: var(--accent-dark);
            border-left: 5px solid var(--accent);
            font-style: italic;
            border-radius: 6px;
        }

        /* Button */
        .buttons {
            display: flex;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .btn {
            padding: 10px 20px;
            text-decoration: none;
            color: #fff;
            border-radius: 6px;
            font-weight: 500;
            transition: background-color 0.2s ease-in-out;
        }

        .btn.primary {
            background-color: var(--accent);
        }

        .btn.primary:hover {
            background-color: var(--accent-dark);
        }
    </style>
{% endblock extra_head %}

{% block content %}
    <div class="container">
        <div class="profile-card">
            <div class="header">

                {% with first_pic=profile.user.pictures.first %}
                    {% if first_pic %}
                        <img src="{{ first_pic.picture_url }}" alt="{{ profile.full_name }}" class="profile-main-image">
                    {% else %}
                        {% if profile.gender == "Male" %}
                            <img src="{{ DEFAULT_MALE_FALLBACK_URL }}" alt="Default Male Profile"
                                 class="profile-main-image">
                        {% else %}
                            <img src="{{ DEFAULT_FEMALE_FALLBACK_URL }}" alt="Default Female Profile"
                                 class="profile-main-image">
                        {% endif %}
                    {% endif %}
                {% endwith %}

                <div class="info">
                    <h2 class="name">{{ profile.full_name }}</h2>
                    <p class="profession">{{ profile.profession }}</p>
                    <p class="age">Age: {{ profile.age }} | Qualification: {{ profile.education }}</p>
                </div>
            </div>

            {% if profile.user.pictures.all %}
                <div class="photo-gallery">
                    {% for pic in profile.user.pictures.all %}
                        <img src="{{ pic.picture_url }}" alt="Photo {{ forloop.counter }}">
                    {% endfor %}
                </div>
            {% endif %}

            <div class="section">
                <h3>Basic Details</h3>
                <ul>
                    <li>Height: {{ profile.height }}</li>
                    <li>Hometown: {{ profile.city }}</li>
                    <li>Current Place: {{ profile.state }}</li>
                </ul>
            </div>

            <div class="section">
                <h3>Education & Profession</h3>
                <ul>
                    <li>Qualification: {{ profile.education }}</li>
                    <li>Profession: {{ profile.profession }}</li>
                    <li>Workplace: {{ profile.occupation }}</li>
                </ul>
            </div>

            <div class="section">
                <h3>Family Background</h3>
                <ul>
                    <li>Caste: {{ profile.caste }}</li>
                    <li>Gotra: {{ profile.gotra }}</li>
                    <li>Religion: {{ profile.religion }}</li>
                    <li>Notes: {{ profile.notes }}</li>
                </ul>
            </div>

            <div class="section">
                <h3>Lifestyle & Contact</h3>
                <ul>
                    <li>Looking For: {{ profile.looking_for }}</li>
                    <li>Phone 1: {{ profile.phone1 }}</li>
                    <li>Phone 2: {{ profile.phone2 }}</li>
                </ul>
            </div>

            {% if profile.bio %}
                <div class="quote">
                    “{{ profile.bio }}”
                </div>
            {% endif %}

            <div class="buttons">
                <a href="{% url 'edit_profile' %}" class="btn primary">Edit Profile</a>
            </div>
        </div>
    </div>
{% endblock content %}
